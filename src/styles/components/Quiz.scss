// Quiz Component SASS Styles
// Using Bootstrap classes as base and custom styles for specific quiz functionality

.quiz-container {
	height: 100%;
	display: flex;
	flex-direction: column;
	padding: 1rem;
	padding-bottom: 80px; // Space for bottom navigation
	overflow-y: auto;
	overflow-x: hidden;
}

.quiz-header {
	text-align: left;
	margin-bottom: 1rem;
	flex-shrink: 0;
}

// New quiz header content layout
.quiz-header-content {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 1rem;

	@media (max-width: 768px) {
		flex-direction: column;
		align-items: flex-start;
		gap: 0.75rem;
	}
}

.quiz-header-left {
	display: flex;
	flex-direction: column;
	gap: 0.25rem;
}

.category-title {
	font-size: 1.75rem;
	font-weight: 600;
	color: var(--header-color);
	margin-bottom: 0.25rem;
}

.difficulty-display {
	font-size: 1rem;
	font-weight: 400;
	color: #666;
	margin: 0;
	text-transform: capitalize;
}

.progress-section {
	margin-bottom: 1rem;
	flex-shrink: 0;
}

.score-display {
	text-align: center;
	margin-bottom: 1rem;
	font-size: 1.1rem;
	font-weight: 500;
	flex-shrink: 0;
}

.quiz-layout {
	display: grid;
	grid-template-columns: 2fr 1.5fr;
	gap: 1rem;
	flex: 1 1 auto;
	min-height: 0;
	margin-bottom: 0.5rem;
	overflow: visible; // Allow borders to be visible
	align-content: space-between;

	@media (max-width: 768px) {
		grid-template-columns: 1fr;
	}
}

.question-container {
	display: flex;
	align-items: center;
	justify-content: center;
	height: 100%;
	padding: 0.75rem;
	border: 1px solid var(--border-color);
	border-radius: 0.375rem;
}

.question-text {
	text-align: center;
	font-weight: 500;
	font-size: 2.5rem;
	margin: 0;
	color: var(--chinese-text-color);
}

.options-container {
	display: flex;
	flex-direction: column;
	gap: 0.75rem;
	height: 100%;
	padding: 0.25rem; // Add padding to prevent border cutoff
	overflow: visible; // Ensure borders are visible
}

.answer-button {
	padding: 0.75rem 2.5rem;
	font-size: 1.8rem;
	font-family: "Open Sans", sans-serif;
	display: flex;
	flex-direction: column;
	gap: 0.25rem;
	position: relative;
	min-height: 90px;
	height: 90px;
	width: 100%;
	align-items: center;
	justify-content: center;
	text-transform: none;
	border: 2px solid var(--primary-button-color);
	color: var(--header-color);
	transition: all 0.15s ease-in-out;

	// Ensure consistent spacing for main text
	.main-text {
		display: block;
		align-items: center;
		font-size: 2.2rem;
		line-height: 2.5rem;
		color: #292a37;
	}

	&:hover {
		transform: translateY(-2px);
	}

	// Correct answers - green background and border
	&.correct {
		background-color: var(--correct-color) !important;
		border-color: var(--correct-color) !important;
		color: var(--header-color) !important;

		.main-text {
			color: white !important;
		}

		.pinyin-text {
			color: white !important;
		}

		&:hover {
			background-color: var(--correct-color) !important;
			border-color: var(--correct-color) !important;
		}

		&:disabled {
			background-color: var(--correct-color) !important;
			border-color: var(--correct-color) !important;
		}

		// Correct and selected - green with stronger border
		&.selected {
			border: 4px solid var(--correct-color) !important;
			box-shadow: 0 0 0 0.2rem rgba(199, 225, 167, 0.4) !important;
		}
	}

	// Incorrect answers - red background and border
	&.incorrect {
		background-color: var(--incorrect-color) !important;
		border-color: var(--incorrect-color) !important;
		color: white !important;

		.main-text {
			color: white !important;
		}

		.pinyin-text {
			color: white !important;
		}

		&:hover {
			background-color: var(--incorrect-color) !important;
			border-color: var(--incorrect-color) !important;
		}

		&:disabled {
			background-color: var(--incorrect-color) !important;
			border-color: var(--incorrect-color) !important;
		}

		// Incorrect and selected - red with stronger border
		&.selected {
			border: 4px solid var(--incorrect-color) !important;
			box-shadow: 0 0 0 0.2rem rgba(232, 120, 110, 0.4) !important;
		}
	}

	// General selected state (for options that haven't been revealed yet)
	&.selected:not(.correct):not(.incorrect) {
		box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
		transform: scale(1.02);
		border: 3px solid #0d6efd !important;
	}

	&.correct-answer {
		animation: correctPulse 0.6s ease-in-out;
	}

	// Option-specific classes for additional styling flexibility
	&.option-1 {
		// First option - can be styled differently if needed
		position: relative;
	}

	&.option-2 {
		// Second option - can be styled differently if needed
		position: relative;
	}

	&.option-3 {
		// Third option - can be styled differently if needed
		position: relative;
	}
}

// Keyframe animation for correct answers
@keyframes correctPulse {
	0% {
		transform: scale(1);
	}
	50% {
		transform: scale(1.05);
	}
	100% {
		transform: scale(1);
	}
}

.pinyin-text {
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 1rem;
	color: #292a37;
	font-style: italic;
	text-transform: lowercase;
	height: 1.2em;
	flex-shrink: 0;
}

.button-wrapper {
	position: relative;
}

.quiz-actions {
	display: flex;
	justify-content: flex-end;
	align-items: center;
	margin-top: 0.75rem;
	margin-bottom: 1rem;
	flex-shrink: 0;
	position: relative;
	z-index: 10;
	gap: 10px;
}

.setup-container {
	height: 100%;
	display: flex;
	flex-direction: column;
	justify-content: center;
	text-align: center;
	padding: 1rem;
}

.setup-form-container {
	display: flex;
	flex-direction: column;
	gap: 1rem;
	max-width: 700px;
	margin: 0 auto;
	background-color: #292a37;
}

.warning-box {
	padding: 1rem;
	border-radius: 0.375rem;
}

.start-button {
	margin-top: 1rem;
}

.results-container {
	height: 100%;
	overflow-y: auto;
	overflow-x: hidden;
	padding: 0.75rem;
	padding-bottom: 80px; // Space for bottom navigation
}

.results-title {
	margin-bottom: 0.5rem;
	text-align: center;
	font-size: 1.25rem;
}

.results-summary {
	margin-bottom: 0.75rem;
	text-align: center;
	font-size: 0.95rem;
}

.result-item {
	margin-bottom: 0.75rem;
	padding: 0.75rem;
	border-radius: 0.375rem;
	font-size: 0.9rem;

	&.result-correct {
		border: 1px solid var(--correct-color);
	}

	&.result-incorrect {
		border: 1px solid var(--incorrect-color);
	}
}

.result-question {
	margin-bottom: 0.5rem;
	font-weight: 500;
	font-size: 1rem;
}

.result-answers {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 0.5rem;
	margin-bottom: 0.25rem;
	font-size: 0.85rem;
}

.result-status {
	margin-top: 0.25rem;
	font-weight: bold;
	font-size: 0.8rem;

	&.status-correct {
		color: var(--correct-color);
	}

	&.status-incorrect {
		color: var(--incorrect-color);
	}
}

.completion-container {
	height: 100%;
	display: flex;
	flex-direction: column;
	justify-content: center;
	padding: 1rem;
	padding-bottom: 80px; // Space for bottom navigation
	text-align: center;
}

.completion-title {
	margin-bottom: 1rem;
}

.completion-score {
	margin-bottom: 1.5rem;
}

.completion-message {
	margin-bottom: 2rem;
}

.completion-actions {
	display: flex;
	flex-direction: column;
	gap: 0.75rem;
	max-width: 300px;
	margin: 0 auto;
}

.loading-container {
	max-width: 1000px;
	margin: 0 auto;
	padding: 1.5rem;
	text-align: center;
}

// Setup form styles
.setup-form {
	display: flex;
	flex-direction: column;
	gap: 1.5rem;
	max-width: 700px;
	margin: 0 auto;
}

// Step navigation styles
.step-navigation {
	display: flex;
	gap: 1rem;
	justify-content: space-between;
	align-items: center;
	margin-top: 1rem;

	@media (max-width: 768px) {
		flex-direction: column;
		gap: 0.75rem;

		button {
			width: 100%;
		}
	}
}

// Warning box styles
.warning-box {
	padding: 1rem;
	border: 1px solid #ffa726;
	border-radius: 4px;
	background-color: #fff3e0;
	margin-bottom: 1rem;
}

// Progress styles
.progress-wrapper {
	margin-bottom: 1rem;
}

.progress-text {
	margin-bottom: 0.5rem;
}

.progress-bar {
	border-radius: 4px;
	height: 8px;
}

// Bottom progress bar styles
.progress-bottom {
	position: fixed;
	bottom: 0; // Just above bottom navigation toolbar
	left: 0;
	right: 0;
	background: white;
	border-top: 1px solid var(--border-color);
	z-index: 100;

	.progress-text {
		margin-bottom: 0.5rem;
		text-align: center;
		font-size: 0.875rem;
		color: #666;
	}

	.progress-bar-bottom {
		border-radius: 0;
		height: 15px;
		margin: 0 -1rem;
		width: calc(100% + 2rem);
		--LinearProgress-progressRadius: 0px;
		--LinearProgress-progressThickness: 100%;
	}
}

// Table styles for results
.results-table {
	border-radius: 4px;
	overflow: auto;
	margin-bottom: 1rem;
}

.table-header-number {
	width: 8%;
	text-align: center;
}

.table-header-question {
	width: 25%;
}

.table-header-answer {
	width: 28%;
}

.table-header-correct {
	width: 28%;
}

.table-header-result {
	width: 11%;
	text-align: center;
}

.table-cell-number {
	text-align: center;
	font-weight: bold;
}

.table-cell-question {
	font-weight: 500;
	font-size: 0.9rem;
}

.table-cell-answer {
	font-size: 0.85rem;
}

.table-cell-correct {
	font-size: 0.85rem;
}

.table-cell-result {
	text-align: center;
}

.table-pinyin {
	font-size: 0.75rem;
	font-style: italic;
	color: #666;
}

.table-result-icon {
	font-size: 1.1rem;

	&.correct {
		color: var(--correct-color);
	}

	&.incorrect {
		color: var(--incorrect-color);
	}
}

// Icon spacing utility
.icon-spacing {
	margin-right: 8px;
}

// Utility classes
.text-center {
	text-align: center;
}

.mb-1 {
	margin-bottom: 0.5rem;
}

.mb-2 {
	margin-bottom: 1rem;
}
